<div class="tramite-backdrop" *ngIf="open && step === 1">
  <div class="tramite-modal">
    <button class="close-btn" (click)="cerrarModal()">‚úï</button>

    <div class="tramite-container">
      <h2 class="tramite-title">Elige tu tr√°mite</h2>
      <p class="tramite-subtitle">
        Selecciona el tr√°mite que quieres hacer y empieza a agendar en segundos.
      </p>

      <!-- Bot√≥n principal -->
      <button class="tramite-main-btn" (click)="continuar()">
        Elige sede y fecha <i class="bi bi-calendar-event"></i>
      </button>

      <!-- Mensaje de error -->
      <p *ngIf="mostrarError" class="tramite-error">
        *Selecciona el tr√°mite que deseas realizar
      </p>

      <!-- Grid de tr√°mites -->
      <div class="tramite-grid">
        <div
          class="tramite-card"
          *ngFor="let item of tramites"
          [class.active]="item === tramiteSeleccionado"
          (click)="seleccionarTramite(item)"
        >
          <img [src]="item.icon" [alt]="item.title" class="tramite-icon" />
          <span class="tramite-label">{{ item.title }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- PANTALLA 2 -->
<div class="modal-backdrop" *ngIf="open && step === 2">
  <div class="modal-container modal-wide">
    <button class="close-btn" (click)="cerrarModal()">√ó</button>

    <div class="tarifas-grid">
      <!-- üü¶ COLUMNA IZQUIERDA -->
      <div class="col-izquierda">
        <div class="tarifas-header">
          <h2 class="titulo-tramite">
            Elige d√≥nde y cu√°ndo <br />
            <strong>hacer tu tr√°mite</strong>
          </h2>
          <p>
            Elegiste el tr√°mite <strong>{{ tramiteSeleccionado?.title }}</strong>,
            ahora elige la ciudad, la sede y la fecha para continuar con tu agendamiento.
          </p>
        </div>

        <!-- üîΩ Desplegables -->
        <div class="filtros">
          <!-- Tramite -->
          <div class="campo">
            <label for="tramite">Tr√°mite</label>
            <select id="tramite" [(ngModel)]="tramiteSeleccionado">
              <option *ngFor="let t of tramites" [ngValue]="t">{{ t.title }}</option>
            </select>
          </div>

          <!-- Fecha -->
          <div class="campo">
            <label for="fecha">Fecha</label>
            <input
  id="fecha"
  type="date"
  [(ngModel)]="fechaSeleccionada"
  [min]="fechaMinima"
  class="input-fecha"
            />
          </div>
        </div>

        <!-- üó∫Ô∏è MAPA + LISTA DE SEDES -->
        <div class="mapa-sedes">
          <div class="mapa-mini">
            <img src="assets/mapa.svg" alt="Mapa de sedes" />
          </div>

          <div class="lista-sedes">
            <div class="sede-item selected">
              <div class="sede-info">
                <div class="sede-left">
                  <h4>AutoM√°s Fontib√≥n</h4>
                  <p>Cra 116 #17-20</p>
                </div>
                <div class="sede-right">
                  <span class="dias">Lunes a Viernes</span>
                  <span class="horario">7:00 a.m. ‚Äì 6:00 p.m.</span>
                </div>
              </div>
            </div>

            <div class="sede-item">
              <div class="sede-info">
                <div class="sede-left">
                  <h4>Calle 13</h4>
                  <p>Diag 13 #69-16</p>
                </div>
                <div class="sede-right">
                  <span class="dias">Lunes a Viernes</span>
                  <span class="horario">7:00 a.m. ‚Äì 6:00 p.m.</span>
                </div>
              </div>
            </div>

            <div class="sede-item">
              <div class="sede-info">
                <div class="sede-left">
                  <h4>AutoM√°s 134</h4>
                  <p>Cra 47 #134-17</p>
                </div>
                <div class="sede-right">
                  <span class="dias">Lunes a Viernes</span>
                  <span class="horario">7:00 a.m. ‚Äì 6:00 p.m.</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- üü¶ COLUMNA DERECHA -->
      <div class="col-derecha">
        <div class="ciudad-ubicacion">
          <i class="bi bi-geo-alt"></i>
          <span>Bogot√°</span>
        </div>

        <div class="tarifa-card">
          <h3>Bogot√° ‚Äì AutoM√°s Fontib√≥n</h3>
          <p>{{ tramiteSeleccionado?.title }}</p>

          <p class="valor">Costo: <strong>$190.000</strong></p>
          <small>Por favor verifica todos los datos antes de agendar.</small>

          <button class="btn-outline">Condiciones del Tr√°mite</button>
          <button class="btn-primary" (click)="agendarRevision()">
            Agendar Ahora <i class="bi bi-calendar-event"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
